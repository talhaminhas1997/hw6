<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background-color: #007bff;
            color: white;
            padding: 1rem;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .chat-area {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            max-height: 70vh;
        }

        .message {
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
        }

        .message.user {
            align-items: flex-end;
        }

        .message.assistant {
            align-items: flex-start;
        }

        .message.placeholder {
            align-items: center;
        }

        .message-bubble {
            max-width: 70%;
            padding: 0.75rem 1rem;
            border-radius: 18px;
            word-wrap: break-word;
        }

        .user1 .message-bubble {
            background-color: #007bff;
            color: white;
        }

        .user .message-bubble {
            background-color: #007bff;
            color: white;
        }

        .assistant .message-bubble {
            background-color: #e9ecef;
            color: #333;
        }

        .placeholder .message-bubble {
            background-color: #f8f9fa;
            color: #6c757d;
            font-style: italic;
            border: 1px dashed #dee2e6;
        }

        .message-sender {
            font-size: 0.8rem;
            color: #6c757d;
            margin-bottom: 0.25rem;
            font-weight: 500;
        }

        .confirmation-card {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            margin: 1rem 0;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
        }

        .input-area {
            padding: 1rem;
            border-top: 1px solid #dee2e6;
            display: flex;
            gap: 0.5rem;
        }

        .message-input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid #dee2e6;
            border-radius: 20px;
            outline: none;
            font-size: 1rem;
        }

        .message-input:focus {
            border-color: #007bff;
        }

        .send-button {
            padding: 0.75rem 1.5rem;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
        }

        .send-button:hover {
            background-color: #0056b3;
        }

        .send-button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            margin-bottom: 1rem;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
            padding: 0.75rem 1rem;
            background-color: #e9ecef;
            border-radius: 18px;
            max-width: 70px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: #6c757d;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        Scheduling Assistant
    </div>
    
    <div class="chat-container">
        <div class="chat-area" id="chatArea">
            <div class="message assistant">
                <div class="message-sender">Assistant</div>
                <div class="message-bubble">
                    Hi! I'm your scheduling assistant. Just tell me who you'd like to meet with and when, and I'll coordinate everything for you. For example: "Schedule coffee with Sarah next week" or "Set up lunch with Mike tomorrow"
                </div>
            </div>
        </div>
        
        <div class="typing-indicator" id="typingIndicator">
            <div class="message-sender">Assistant</div>
            <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        </div>
        
        <div class="input-area">
            <input type="text" class="message-input" id="messageInput" 
                   placeholder="Tell me who you'd like to meet with..." maxlength="300">
            <button class="send-button" id="sendButton">Send</button>
        </div>
    </div>

    <script>
        class SchedulingAssistant {
            constructor() {
                this.chatArea = document.getElementById('chatArea');
                this.messageInput = document.getElementById('messageInput');
                this.sendButton = document.getElementById('sendButton');
                this.typingIndicator = document.getElementById('typingIndicator');
                this.isProcessing = false;
                
                this.setupEventListeners();
            }

            setupEventListeners() {
                this.sendButton.addEventListener('click', () => this.handleSend());
                this.messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.handleSend();
                });
            }

            async handleSend() {
                const message = this.messageInput.value.trim();
                if (!message || this.isProcessing) return;

                // Add user message
                this.addMessage('You', message);
                this.messageInput.value = '';
                this.disableInput();

                // Process the request
                await this.processSchedulingRequest(message);
            }

            parseSchedulingRequest(message) {
                // Extract person, activity, and timeframe from natural language
                const personMatch = message.match(/with\s+(\w+)/i);
                const activityMatch = message.match(/\b(schedule|set up|plan|coordinate|arrange)?\s*(coffee|lunch|dinner|movie|drinks|meeting|hangout|call|chat)\b/i);
                const timeMatch = message.match(/\b(today|tomorrow|next week|this week|weekend|monday|tuesday|wednesday|thursday|friday|saturday|sunday|asap|soon)\b/i);
                
                return {
                    person: personMatch ? personMatch[1] : 'them',
                    activity: activityMatch ? activityMatch[2].toLowerCase() : 'meeting',
                    timeframe: timeMatch ? timeMatch[1].toLowerCase() : 'soon'
                };
            }

            async processSchedulingRequest(message) {
                this.isProcessing = true;
                
                // Show typing indicator
                await this.delay(800);
                this.showTyping();
                
                // Parse the request
                const parsed = this.parseSchedulingRequest(message);
                
                // Generate assistant response
                await this.delay(1500);
                this.hideTyping();
                
                const response = this.generateAssistantResponse(parsed, message);
                this.addMessage('Assistant', response);
                
                this.isProcessing = false;
                this.enableInput();
            }

            generateAssistantResponse(parsed, originalMessage) {
                const responses = [
                    `Got it! I'll coordinate ${parsed.activity} with ${parsed.person} for ${parsed.timeframe}. I'm reaching out to them now to find a time that works for both of you. I'll send you an update within 3 hours, likely much sooner!`,
                    
                    `Perfect! I'm on it. I'll contact ${parsed.person} to schedule ${parsed.activity} ${parsed.timeframe}. I'll handle all the back-and-forth and get back to you with confirmed details within 3 hours.`,
                    
                    `Absolutely! Let me take care of scheduling ${parsed.activity} with ${parsed.person} ${parsed.timeframe}. I'm sending them a message now with some time options. You'll hear back from me within 3 hours with the final details.`,
                    
                    `Consider it done! I'm coordinating ${parsed.activity} with ${parsed.person} for ${parsed.timeframe}. I'll handle the scheduling conversation and update you with the confirmed time within 3 hours, probably sooner.`
                ];
                
                // Handle edge cases for unclear requests
                if (!originalMessage.match(/with\s+\w+/i)) {
                    return "I'd be happy to help schedule that! Could you let me know who you'd like to meet with? For example: 'Schedule coffee with Sarah next week'";
                }
                
                return responses[Math.floor(Math.random() * responses.length)];
            }


            addMessage(sender, text) {
                const messageDiv = document.createElement('div');
                const senderClass = sender.toLowerCase() === 'you' ? 'user' : 'assistant';
                messageDiv.className = `message ${senderClass}`;
                
                messageDiv.innerHTML = `
                    <div class="message-sender">${sender}</div>
                    <div class="message-bubble">${text}</div>
                `;
                
                this.chatArea.appendChild(messageDiv);
                this.scrollToBottom();
            }

            showTyping() {
                this.typingIndicator.style.display = 'flex';
                this.scrollToBottom();
            }

            hideTyping() {
                this.typingIndicator.style.display = 'none';
            }

            disableInput() {
                this.messageInput.disabled = true;
                this.sendButton.disabled = true;
            }

            enableInput() {
                this.messageInput.disabled = false;
                this.sendButton.disabled = false;
                this.messageInput.focus();
            }

            scrollToBottom() {
                this.chatArea.scrollTop = this.chatArea.scrollHeight;
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Initialize the scheduling assistant when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new SchedulingAssistant();
        });
    </script>
</body>
</html>
